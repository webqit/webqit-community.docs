
	<template name="api">
		<div exportgroup="readme">

			<h1 id="api">API</h1>

		</div>
	</template>

	

	<template name="installation">
		<div exportgroup="readme">

			<h1 id="installation-guide">Installation Guide</h1>
<p>Subscript can be used both on the server and in the browser.</p>
<h2 id="on-this-page">On this Page</h2>
<ul>
<li><a href="#embed-as-script">Embed As Script</a></li>
<li><a href="#install-via-npm">Install Via NPM</a></li>
<li><a href="#next-steps">Next Steps</a></li>
</ul>
<h2 id="embed-as-script">Embed as script</h2>
<pre><code class="hljs html language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/@webqit/subscript/dist/main.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// The above tag loads JSEN into a global "WQ" object.</span>
<span class="hljs-keyword">const</span> Subscript = <span class="hljs-built_in">window</span>.WQ.Subscript;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
<h2 id="install-via-npm">Install via npm</h2>
<pre><code class="hljs text language-text">$ <span class="hljs-built_in">npm</span> i -g <span class="hljs-built_in">npm</span>
$ <span class="hljs-built_in">npm</span> i --save @webqit/subscript</code></pre>
<p>Import the library.</p>
<pre><code class="hljs js language-js"><span class="hljs-comment">// Node-style import</span>
<span class="hljs-keyword">import</span> Subscript <span class="hljs-keyword">from</span> <span class="hljs-string">'@webqit/subscript'</span>;

<span class="hljs-comment">// parse() an expression</span>
<span class="hljs-keyword">var</span> exprObj = Subscript.parse(expr);

<span class="hljs-comment">// get result with eval()</span>
<span class="hljs-built_in">console</span>.log(exprObj.eval());

<span class="hljs-comment">// convert to string anytime</span>
<span class="hljs-built_in">console</span>.log(exprObj.toString());</code></pre>
<h2 id="next-steps">Next Steps</h2>
<p>Be sure to check the <a href="../README.md">usage examples</a>.</p>

		</div>
	</template>

	<template name="language">
		<div exportgroup="readme">

			<h1 id="the-language">The Language</h1>
<p>Here are just some of the many aspects of the JavaScript language currently implemented. We are working to make this page more comprehensive.</p>
<h2 id="math-expression">Math expression</h2>
<pre><code class="hljs js language-js"><span class="hljs-comment">// parse() a Math expression</span>
<span class="hljs-keyword">var</span> expr = <span class="hljs-string">'7 + 8'</span>;
<span class="hljs-keyword">var</span> exprObj = Subscript.parse(expr);

<span class="hljs-comment">// get result with eval()</span>
<span class="hljs-built_in">console</span>.log(exprObj.eval());

<span class="hljs-comment">// convert to string anytime</span>
<span class="hljs-built_in">console</span>.log(exprObj.stringify());</code></pre>
<h2 id="primitives-and-object-notations">Primitives and object notations</h2>
<pre><code class="hljs js language-js"><span class="hljs-comment">// parse() a value</span>
<span class="hljs-keyword">var</span> expr = <span class="hljs-string">'10'</span>;
<span class="hljs-keyword">var</span> exprObj = Subscript.parse(expr);

<span class="hljs-comment">// get result with eval()</span>
<span class="hljs-built_in">console</span>.log(exprObj.eval());

<span class="hljs-comment">// ------------</span>

<span class="hljs-comment">// parse() an array expression</span>
<span class="hljs-keyword">var</span> expr = <span class="hljs-string">'["New York City", "Lagos", "Berlin"]'</span>;
<span class="hljs-keyword">var</span> exprObj = Subscript.parse(expr);

<span class="hljs-comment">// get result with eval()</span>
<span class="hljs-built_in">console</span>.log(exprObj.eval());

<span class="hljs-comment">// ------------</span>

<span class="hljs-comment">// parse() an object expression</span>
<span class="hljs-keyword">var</span> expr = <span class="hljs-string">'{city1: "New York City", city2: "Lagos", city3: "Berlin"}'</span>;
<span class="hljs-keyword">var</span> exprObj = Subscript.parse(expr);

<span class="hljs-comment">// get result with eval()</span>
<span class="hljs-built_in">console</span>.log(exprObj.eval());

<span class="hljs-comment">// ------------</span>

<span class="hljs-comment">// convert to string anytime</span>
<span class="hljs-built_in">console</span>.log(exprObj.stringify());</code></pre>
<h2 id="conditional-expressions">Conditional Expressions</h2>
<pre><code class="hljs js language-js">// "if" ... "else" constructs
var expr = 'if (2 &gt; 1) {
    // Expression1
} else if (3 &gt; 2) {
    // Expression2
} else {
    // Expression3
}';

// Ternary Conditional Expressions;
var expr = '2 &gt; 1 ? expression1 : (3 &gt; 2 ? expression2 : expression3)';</code></pre>
<h2 id="eval-with-a-context-object">Eval() with a context object</h2>
<pre><code class="hljs js language-js"><span class="hljs-comment">// parse() a logical expression with references to properties of a context object</span>
<span class="hljs-keyword">var</span> expr = <span class="hljs-string">'age &lt; 18 ? fname + " " + lname + " does not meet the age requirement!" : fname + " " + lname + " is old enough!"'</span>;
<span class="hljs-keyword">var</span> exprObj = Subscript.parse(expr);

<span class="hljs-comment">// eval() with a context object</span>
<span class="hljs-keyword">var</span> context = {<span class="hljs-attr">fname</span>: <span class="hljs-string">"John"</span>, <span class="hljs-attr">lname</span>: <span class="hljs-string">"Doe"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">24</span>};
<span class="hljs-built_in">console</span>.log(exprObj.eval(context));

<span class="hljs-comment">// eval() same exprObj with another context object</span>
<span class="hljs-keyword">var</span> context2 = {<span class="hljs-attr">fname</span>: <span class="hljs-string">"John2"</span>, <span class="hljs-attr">lname</span>: <span class="hljs-string">"Doe2"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">10</span>};
<span class="hljs-built_in">console</span>.log(exprObj.eval(context2));

<span class="hljs-comment">// convert to string anytime</span>
<span class="hljs-built_in">console</span>.log(exprObj.stringify());</code></pre>
<h3 id="eval-with-traps"><code>eval()</code> with traps</h3>
<p>The <code>eval()</code> allows us to set traps that intercept <code>set</code>, <code>get</code>, <code>delete</code>, and <code>in</code> operations. A trap works just like ES6 Proxy traps.</p>
<pre><code class="hljs js language-js"><span class="hljs-comment">// The "get" handler in the trap below will be called as the "age", "fname", "lname" references are being evaluated</span>
<span class="hljs-built_in">console</span>.log(exprObj.eval(context2, <span class="hljs-literal">null</span>, {
    <span class="hljs-attr">get</span>:<span class="hljs-function">(<span class="hljs-params">target, propertyName</span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> target[propertyName];
    }
}));</code></pre>
<h2 id="call-a-method">Call a method</h2>
<pre><code class="hljs js language-js"><span class="hljs-comment">// parse() a logical expression with embedded calls</span>
<span class="hljs-keyword">var</span> expr = <span class="hljs-string">'"Today is: " + date().stringify()'</span>;
<span class="hljs-keyword">var</span> exprObj = Subscript.parse(expr);

<span class="hljs-comment">// eval() with the given context</span>
<span class="hljs-keyword">var</span> context = {<span class="hljs-attr">date</span>:<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>)};
<span class="hljs-built_in">console</span>.log(exprObj.eval(context));

<span class="hljs-comment">// convert to string anytime</span>
<span class="hljs-built_in">console</span>.log(exprObj.stringify());</code></pre>
<h2 id="es6-style-function-declaration-supported">ES6-style function declaration supported</h2>
<pre><code class="hljs js language-js"><span class="hljs-comment">// parse() a function declaration that will materialize into a real function</span>
<span class="hljs-keyword">var</span> expr = <span class="hljs-string">'(arg1, arg2) =&gt; {return arg1 + arg2 + argFromContext}'</span>;
<span class="hljs-keyword">var</span> exprObj = Subscript.parse(expr);

<span class="hljs-comment">// eval() to materialize the declared function</span>
<span class="hljs-keyword">var</span> context = {<span class="hljs-attr">argFromContext</span>: <span class="hljs-number">10</span>};
<span class="hljs-keyword">var</span> sumFunction = exprObj.eval(context);

<span class="hljs-comment">// Call materialized function now</span>
<span class="hljs-built_in">console</span>.log(sumFunction(<span class="hljs-number">30</span>, <span class="hljs-number">20</span>));

<span class="hljs-comment">// convert to string anytime</span>
<span class="hljs-built_in">console</span>.log(exprObj.stringify());</code></pre>
<h2 id="assignment-operation-supported">Assignment operation supported</h2>
<pre><code class="hljs js language-js"><span class="hljs-comment">// parse() an assignment expression.</span>
<span class="hljs-comment">// Multiple expressions supported.</span>
<span class="hljs-keyword">var</span> expr = <span class="hljs-string">'prop2 = "val2"; prop3 = "val3"'</span>;
<span class="hljs-keyword">var</span> exprObj = Subscript.parse(expr);

<span class="hljs-comment">// eval() with a context object</span>
<span class="hljs-keyword">var</span> context = {<span class="hljs-attr">prop1</span>: <span class="hljs-string">"val1"</span>};
<span class="hljs-built_in">console</span>.log(exprObj.eval(context));

<span class="hljs-comment">// Confirm the new properties have been set</span>
<span class="hljs-built_in">console</span>.log(context);

<span class="hljs-comment">// convert to string anytime</span>
<span class="hljs-built_in">console</span>.log(exprObj.stringify());</code></pre>
<h2 id="delete-operation-supported">Delete operation supported</h2>
<pre><code class="hljs js language-js"><span class="hljs-comment">// parse() a delete expression.</span>
<span class="hljs-keyword">var</span> expr = <span class="hljs-string">'delete prop1; delete prop1'</span>;
<span class="hljs-keyword">var</span> exprObj = Subscript.parse(expr);

<span class="hljs-comment">// eval() with a context object to mutate</span>
<span class="hljs-keyword">var</span> context = {<span class="hljs-attr">prop1</span>: <span class="hljs-string">"val1"</span>, <span class="hljs-attr">prop2</span>: <span class="hljs-string">"val2"</span>, <span class="hljs-attr">prop3</span>: <span class="hljs-string">"val3"</span>};
<span class="hljs-built_in">console</span>.log(exprObj.eval(context));

<span class="hljs-comment">// Confirm the new property has been deleted</span>
<span class="hljs-built_in">console</span>.log(context);

<span class="hljs-comment">// convert to string anytime</span>
<span class="hljs-built_in">console</span>.log(exprObj.stringify());</code></pre>
<h2 id="multiple-expressions-and-comments-supported">Multiple expressions and Comments supported</h2>
<pre><code class="hljs js language-js"><span class="hljs-comment">// Line comments</span>
<span class="hljs-keyword">var</span> expr = <span class="hljs-string">`

/**
 * Block comments
 */

// Single line comments
delete prop1; delete /*comment anywhere*/prop3;
`</span>;

<span class="hljs-keyword">var</span> exprObj = Subscript.parse(expr);

<span class="hljs-comment">// eval() with a context object to mutate</span>
<span class="hljs-keyword">var</span> context = {<span class="hljs-attr">prop1</span>: <span class="hljs-string">"val1"</span>, <span class="hljs-attr">prop2</span>: <span class="hljs-string">"val2"</span>, <span class="hljs-attr">prop3</span>: <span class="hljs-string">"val3"</span>};
<span class="hljs-built_in">console</span>.log(exprObj.eval(context));

<span class="hljs-comment">// Confirm the new properties have been deleted</span>
<span class="hljs-built_in">console</span>.log(context);

<span class="hljs-comment">// Convert to string without the comments</span>
<span class="hljs-built_in">console</span>.log(exprObj.stringify());</code></pre>

		</div>
	</template>

	<img src="/logo.fw.png" / exportgroup="logo.fw">

	<div exportgroup="readme">

		<h1 id="subscript">Subscript</h1>
<!-- BADGES/ -->
<p><span class="badge-npmversion"><a href="https://npmjs.org/package/@webqit/subscript" title="View this project on NPM"><img src="https://img.shields.io/npm/v/@webqit/subscript.svg" alt="NPM version" /></a></span><br />
<span class="badge-npmdownloads"><a href="https://npmjs.org/package/@webqit/subscript" title="View this project on NPM"><img src="https://img.shields.io/npm/dm/@webqit/subscript.svg" alt="NPM downloads" /></a></span></p>
<!-- /BADGES -->
<p><em><a href="https://webqit.io/tooling/subscript">Subscript</a></em> is a pseudo implementation (parser + runtime) of the JavaScript language. It is used for parsing JavaScript code and executing them in user-defined context.</p>
<p>Subscript is currently at the core of the <a href="https://webqit.io/tooling/oohtml/scoped-scripts">Scoped Scripts</a> feature of the <a href="https://webqit.io/tooling/oohtml">OOHTML</a> technology. It is also light enough for simple language tooling.</p>
<blockquote>
  <p><a href="https://github.com/webqit/subscript">Visit this project on GitHub</a>.</p>
</blockquote>
<pre><code class="hljs js language-js"><span class="hljs-comment">// parse() an expression</span>
<span class="hljs-keyword">var</span> exprObj = Subscript.parse(expr);

<span class="hljs-comment">// get result with eval()</span>
<span class="hljs-built_in">console</span>.log(exprObj.eval());</code></pre>
<p>Follow the <a href="installation/README.md">installation guide</a> to obtain this library.</p>
<h2 id="documentation">Documentation</h2>
<ul>
<li><a href="language/README.md">The Language</a></li>
</ul>
<h2 id="issues">Issues</h2>
<p>To report bugs or request features, please submit an <a href="https://github.com/webqit/subscript/issues">issue</a>.</p>
<h2 id="license">License</h2>
<p>MIT.</p>

	</div>
